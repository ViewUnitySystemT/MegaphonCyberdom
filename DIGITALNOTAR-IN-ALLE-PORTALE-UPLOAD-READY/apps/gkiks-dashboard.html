<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>üåê GKIKS - Globales KI-Kommunikations- und Kontrollsystem</title>
<h1 style="position: absolute; left: -9999px;">üåê GKIKS - Globales KI-Kommunikations- und Kontrollsystem</h1>
  
  <!-- QR Code Library -->
  <script src="https://cdn.jsdelivr.net/npm/qrcode@1.5.3/build/qrcode.min.js"></script>
  <!-- QR Scanner Library -->
  <script src="https://cdn.jsdelivr.net/npm/jsqr@1.4.0/dist/jsQR.js"></script>
  <!-- Double Ratchet Library -->
  <script src="https://cdn.jsdelivr.net/npm/libsignal-protocol@2.0.0/dist/libsignal-protocol.min.js"></script>
  
  <style>
    :root { 
      color-scheme: light dark; 
      --primary: #7aa2ff;
      --success: #27e86b;
      --warning: #ffd166;
      --error: #ef476f;
      --ai: #00d4ff;
      --trust: #ffd700;
      --space: #9d4edd;
      --military: #ff6b35;
      --bg-dark: #0a0f1f;
      --bg-panel: rgba(13,19,35,.5);
      --border: rgba(122,162,255,.25);
    }
    
    body { 
      margin:0; 
      font:14px/1.45 ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto; 
      background: var(--bg-dark); 
      color:#e8ecff; 
      background-image: 
        radial-gradient(circle at 20% 80%, rgba(0,212,255,0.1) 0%, transparent 50%),
        radial-gradient(circle at 80% 20%, rgba(255,107,53,0.1) 0%, transparent 50%),
        radial-gradient(circle at 40% 40%, rgba(255,215,0,0.05) 0%, transparent 50%);
    }
    
    header { 
      padding:12px 16px; 
      border-bottom:1px solid var(--border); 
      display:flex; 
      align-items:center; 
      gap:8px; 
      background: var(--bg-panel);
      backdrop-filter: blur(10px);
    }
    
    .container { padding:12px 16px; }
    
    .gkiks-panel { 
      margin: 12px 0; 
      padding: 12px; 
      border:1px solid var(--border); 
      border-radius: 12px; 
      background: var(--bg-panel); 
      backdrop-filter: blur(10px);
    }
    
    .row { 
      display:flex; 
      gap:8px; 
      flex-wrap:wrap; 
      align-items:center; 
    }
    
    .btn { 
      background: linear-gradient(135deg,var(--primary),#a87dff); 
      border:none; 
      color:#fff; 
      border-radius:10px; 
      padding:8px 12px; 
      cursor:pointer; 
      transition: all 0.3s ease;
      font-weight: 600;
    }
    
    .btn:hover {
      transform: translateY(-1px);
      box-shadow: 0 4px 12px rgba(122,162,255,0.3);
    }
    
    .btn.ai { background: linear-gradient(135deg, var(--ai), #0099cc); }
    .btn.trust { background: linear-gradient(135deg, var(--trust), #ff8c00); }
    .btn.space { background: linear-gradient(135deg, var(--space), #7209b7); }
    .btn.military { background: linear-gradient(135deg, var(--military), #cc3300); }
    
    .status-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 12px;
      margin: 12px 0;
    }
    
    .status-item {
      padding: 8px;
      border: 1px solid var(--border);
      border-radius: 8px;
      background: var(--bg-panel);
    }
    
    .ampel{
      display:flex; 
      gap:8px; 
      align-items:center; 
      flex-wrap:wrap;
    }
    
    .dot{
      width:12px; 
      height:12px; 
      border-radius:50%; 
      background:#444; 
      box-shadow:0 0 8px rgba(0,0,0,.5);
      transition: all 0.3s ease;
    }
    
    .dot.ok{background:var(--success)}
    .dot.warn{background:var(--warning)}
    .dot.err{background:var(--error)}
    .dot.ai{background:var(--ai)}
    .dot.trust{background:var(--trust)}
    .dot.space{background:var(--space)}
    .dot.military{background:var(--military)}
    
    .night { 
      filter: invert(1) hue-rotate(180deg); 
    }
    
    input, textarea, select { 
      background:#0f1730; 
      color:#e8ecff; 
      border:1px solid var(--border); 
      border-radius:8px; 
      padding:8px; 
      width: 100%;
      box-sizing: border-box;
    }
    
    pre {
      background: #0f1730;
      padding: 8px;
      border-radius: 8px;
      border: 1px solid var(--border);
      overflow-x: auto;
      font-size: 12px;
      max-height: 300px;
      overflow-y: auto;
    }
    
    .progress-bar {
      width: 100%;
      height: 20px;
      background: rgba(0,0,0,0.3);
      border-radius: 10px;
      overflow: visible;
      margin: 8px 0;
    }
    
    .progress-fill {
      height: 100%;
      background: linear-gradient(90deg, var(--success), var(--ai));
      transition: width 0.3s ease;
    }
    
    .trust-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 8px;
    }
    
    .qr-container {
      display: flex;
      gap: 16px;
      align-items: center;
      margin: 12px 0;
    }
    
    .qr-code {
      border: 1px solid var(--border);
      border-radius: 8px;
      padding: 8px;
      background: white;
    }
    
    .camera-container {
      position: relative;
      width: 100%;
      max-width: 400px;
    }
    
    #cameraVideo {
      width: 100%;
      border-radius: 8px;
      border: 1px solid var(--border);
    }
    
    .scan-overlay {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 200px;
      height: 200px;
      border: 2px solid var(--primary);
      border-radius: 8px;
      pointer-events: none;
    }
  </style>
</head>
<body>
  <header>
    <strong>üåê GKIKS - Globales KI-Kommunikations- und Kontrollsystem</strong>
    <button id="nightBtn" class="btn" title="Action Button">Tag/Nacht</button>
    <div class="ampel">
      <div id="globalStatus" class="dot"></div>
      <span>System Status</span>
    </div>
    <div class="progress-bar">
      <div class="progress-fill" id="systemProgress" style="width: 0%"></div>
    </div>
  </header>
  
  <div class="container">
    <main>
      <!-- AI Orchestrator -->
      <section class="gkiks-panel">
        <h3>üß† AI Orchestrator (Decision/RAG/QA)</h3>
        <div class="row">
          <button id="aiAnalyze" class="btn ai" title="Action Button">App-Analyse</button>
          <button id="aiLearn" class="btn ai" title="Action Button">Lernmodus</button>
          <button id="aiFix" class="btn ai" title="Action Button">Auto-Fix</button>
          <button id="aiUpdate" class="btn ai" title="Action Button">Update-Suche</button>
        </div>
        <div class="status-grid">
          <div class="status-item">
            <div class="ampel">
              <div id="aiStatus" class="dot"></div>
              <span>AI System</span>
            </div>
            <div id="aiInfo">Bereit f√ºr Analyse</div>
          </div>
          <div class="status-item">
            <div class="ampel">
              <div id="learningStatus" class="dot"></div>
              <span>Lernmodus</span>
            </div>
            <div id="learningInfo">Inaktiv</div>
          </div>
        </div>
        <pre id="aiLog"></pre>
      </section>

      <!-- Trust/Notar Layer -->
      <section class="gkiks-panel">
        <h3>üõ°Ô∏è Trust/Notar Layer (Time-Stamp, VC/JWS)</h3>
        <div class="trust-grid">
          <div>
            <label>Artefakt (Text)</label>
            <textarea id="trData" placeholder="Runbook/Config/Bericht‚Ä¶"></textarea>
            <div class="row">
              <button id="trHash" class="btn trust" title="Action Button">Hash+Stamp</button>
              <button id="trSign" class="btn trust" title="Action Button">Signieren (JWS)</button>
              <button id="trVC" class="btn trust" title="Action Button">VC ausstellen</button>
            </div>
          </div>
          <pre id="trLog"></pre>
        </div>
      </section>

      <!-- Keyring/QR/Double-Ratchet -->
      <section class="gkiks-panel">
        <h3>üîê Keyring/QR/Double-Ratchet</h3>
        <div class="row">
          <input id="grpName" placeholder="Gruppenname" / aria-label="Input Field">
          <button id="mkGrp" class="btn" title="Action Button">Gruppe erzeugen</button>
          <button id="listGrp" class="btn" title="Action Button">Anzeigen</button>
        </div>
        
        <div class="row">
          <button id="generateQRBtn" class="btn" title="Action Button">QR generieren</button>
          <button id="scanQRBtn" class="btn" title="Action Button">QR scannen</button>
          <button id="exportKeys" class="btn" title="Action Button">Keys exportieren</button>
          <button id="importKeys" class="btn" title="Action Button">Keys importieren</button>
        </div>
        
        <div id="qrZone" class="qr-container"></div>
        
        <div id="cameraZone" class="camera-container" style="display: block;">
          <video id="cameraVideo" autoplay></video>
          <div class="scan-overlay"></div>
          <button id="stopScanBtn" class="btn" title="Action Button">Scan stoppen</button>
        </div>
        
        <div class="row">
          <button id="initRatchetBtn" class="btn" title="Action Button">Ratchet initialisieren</button>
          <button id="exchangeKeysBtn" class="btn" title="Action Button">Keys austauschen</button>
          <button id="encryptMsgBtn" class="btn" title="Action Button">Nachricht verschl√ºsseln</button>
        </div>
        <textarea id="ratchetMsg" placeholder="Nachricht zum verschl√ºsseln..."></textarea>
        <pre id="ratchetLog"></pre>
      </section>

      <!-- TURN Zeit-Token Controller -->
      <section class="gkiks-panel">
        <h3>üåê TURN Zeit-Token Controller (coturn REST)</h3>
        <div class="row">
          <button id="generateTURNBtn" class="btn" title="Action Button">TURN Token generieren</button>
          <button id="validateTURNBtn" class="btn" title="Action Button">Token validieren</button>
          <button id="autoRotateBtn" class="btn" title="Action Button">Auto-Rotation</button>
        </div>
        <div class="status-grid">
          <div class="status-item">
            <div class="ampel">
              <div id="turnStatus" class="dot"></div>
              <span>TURN Server</span>
            </div>
            <div id="turnInfo">Bereit</div>
          </div>
          <div class="status-item">
            <div class="ampel">
              <div id="tokenStatus" class="dot"></div>
              <span>Token Status</span>
            </div>
            <div id="tokenInfo">Kein Token</div>
          </div>
        </div>
        <pre id="turnLog"></pre>
      </section>

      <!-- QA Pipeline -->
      <section class="gkiks-panel">
        <h3>üß™ QA Pipeline (Analyse‚ÜíTests‚ÜíFix‚ÜíSign/Stamp)</h3>
        <div class="row">
          <button id="qaSeal" class="btn" title="Action Button">Analyse‚ÜíTests‚ÜíSign+Stamp</button>
          <button id="qaRun" class="btn" title="Action Button">Tests ausf√ºhren</button>
          <button id="qaReport" class="btn" title="Action Button">Bericht generieren</button>
        </div>
        <pre id="qaSealLog"></pre>
      </section>

      <!-- Transport Gateways -->
      <section class="gkiks-panel">
        <h3>üöÄ Transport Gateways</h3>
        <div class="status-grid">
          <div class="status-item">
            <div class="ampel">
              <div id="stunStatus" class="dot"></div>
              <span>STUN/TURN</span>
            </div>
          </div>
          <div class="status-item">
            <div class="ampel">
              <div id="matrixStatus" class="dot"></div>
              <span>Matrix</span>
            </div>
          </div>
          <div class="status-item">
            <div class="ampel">
              <div id="dtnStatus" class="dot space"></div>
              <span>DTN/ISS</span>
            </div>
          </div>
          <div class="status-item">
            <div class="status-item">
              <div class="ampel">
                <div id="ax25Status" class="dot military"></div>
                <span>AX.25/Funk</span>
              </div>
            </div>
          </div>
          <div class="status-item">
            <div class="ampel">
              <div id="smtpStatus" class="dot"></div>
              <span>SMTP Relay</span>
            </div>
          </div>
        </div>
      </section>

      <!-- System Status -->
      <section class="gkiks-panel">
        <h3>üìä System Status</h3>
        <div class="status-grid">
          <div class="status-item">
            <div class="ampel">
              <div id="webRTCStatus" class="dot"></div>
              <span>WebRTC</span>
            </div>
          </div>
          <div class="status-item">
            <div class="ampel">
              <div id="cryptoStatus" class="dot"></div>
              <span>Krypto</span>
            </div>
          </div>
          <div class="status-item">
            <div class="ampel">
              <div id="trustStatus" class="dot trust"></div>
              <span>Trust</span>
            </div>
          </div>
          <div class="status-item">
            <div class="ampel">
              <div id="qaStatus" class="dot"></div>
              <span>QA</span>
            </div>
          </div>
        </div>
      </section>
    </main>
  </div>

  <script>
  // GKIKS System Initialization
  (function(){
    const GKIKS = {
      version: '29.0.0',
      build: 'GKIKS',
      initialized: false,
      
      async init() {
        this.log('üåê GKIKS System initialisiert v' + this.version);
        this.updateProgress(10);
        
        // Initialize Trust Layer
        await this.initTrustLayer();
        this.updateProgress(30);
        
        // Initialize AI System
        await this.initAISystem();
        this.updateProgress(50);
        
        // Initialize Crypto Systems
        await this.initCryptoSystems();
        this.updateProgress(70);
        
        // Initialize Transport Gateways
        await this.initTransportGateways();
        this.updateProgress(90);
        
        // Final initialization
        this.initialized = true;
        this.updateProgress(100);
        this.log('‚úÖ GKIKS System vollst√§ndig initialisiert');
        
        // Start continuous update routine
        this.startUpdateRoutine();
      },
      
      updateProgress(percent) {
        document.getElementById('systemProgress').style.width = percent + '%';
      },
      
      log(message) {
        console.log('[GKIKS]', message);
        // Update all log displays
        const logs = ['aiLog', 'trLog', 'ratchetLog', 'turnLog', 'qaSealLog'];
        logs.forEach(logId => {
          const logEl = document.getElementById(logId);
          if (logEl) {
            logEl.textContent += '\n' + new Date().toLocaleTimeString() + ': ' + message;
            logEl.scrollTop = logEl.scrollHeight;
          }
        });
      },
      
      async initTrustLayer() {
        this.log('üõ°Ô∏è Initialisiere Trust Layer...');
        
        // Trust Layer Implementation (from your specification)
        const enc = new TextEncoder();
        const dec = new TextDecoder();
        
        async function sha256(data) {
          const buf = (typeof data === 'string') ? enc.encode(data) : data;
          const d = await crypto.subtle.digest('SHA-256', buf);
          return Array.from(new Uint8Array(d)).map(b => b.toString(16).padStart(2, '0')).join('');
        }
        
        async function makeSigningKey() {
          const kp = await crypto.subtle.generateKey({ name: 'ECDSA', namedCurve: 'P-256' }, true, ['sign', 'verify']);
          const pub = await crypto.subtle.exportKey('raw', kp.publicKey);
          localStorage.setItem('gkiks:sign:pub', btoa(String.fromCharCode(...new Uint8Array(pub))));
          window.GKIKS_SIGN = { kp };
          return kp;
        }
        
        async function jwsSign(payload) {
          if (!window.GKIKS_SIGN?.kp) await makeSigningKey();
          const header = { alg: 'ES256', typ: 'JWT', kid: localStorage.getItem('gkiks:sign:pub') || '' };
          const b64 = (o) => btoa(unescape(encodeURIComponent(JSON.stringify(o)))).replace(/=+$/, '').replace(/\+/g, '-').replace(/\//g, '_');
          const p64 = b64(payload);
          const h64 = b64(header);
          const toSign = enc.encode(h64 + '.' + p64);
          const sig = await crypto.subtle.sign({ name: 'ECDSA', hash: 'SHA-256' }, GKIKS_SIGN.kp.privateKey, toSign);
          const s64 = btoa(String.fromCharCode(...new Uint8Array(sig))).replace(/=+$/, '').replace(/\+/g, '-').replace(/\//g, '_');
          return `${h64}.${p64}.${s64}`;
        }
        
        async function tsaStamp(hashHex) {
          const ts = new Date().toISOString();
          const nonce = crypto.getRandomValues(new Uint8Array(8));
          const proof = await jwsSign({ ts, nonce: Array.from(nonce), hash: hashHex });
          const chain = JSON.parse(localStorage.getItem('gkiks:tsa:chain') || '[]');
          chain.push({ ts, hash: hashHex, proof });
          localStorage.setItem('gkiks:tsa:chain', JSON.stringify(chain));
          return { ts, proof };
        }
        
        function issueVC(subject, claims) {
          return {
            '@context': ['https://www.w3.org/2018/credentials/v1'],
            type: ['VerifiableCredential', 'GKIKSRunbookCredential'],
            issuer: { id: 'did:gkiks:' + (localStorage.getItem('gkiks:sign:pub') || '') },
            issuanceDate: new Date().toISOString(),
            credentialSubject: { id: subject, ...claims }
          };
        }
        
        window.GKIKS_TRUST = { sha256, makeSigningKey, jwsSign, tsaStamp, issueVC };
        this.log('‚úÖ Trust Layer initialisiert');
      },
      
      async initAISystem() {
        this.log('üß† Initialisiere AI System...');
        
        // AI System Implementation
        window.GKIKS_AI = {
          async analyze() {
            return ['WebRTC OK', 'Crypto OK', 'Trust OK'];
          },
          
          async learn() {
            this.log('ü§ñ AI Lernmodus aktiviert');
            return true;
          },
          
          async fix() {
            this.log('üîß AI Auto-Fix ausgef√ºhrt');
            return true;
          },
          
          async searchUpdates() {
            this.log('üîç Suche nach Updates...');
            // Simulate update search
            return ['QR Library Update', 'TURN Token Fix', 'Double Ratchet Enhancement'];
          }
        };
        
        this.log('‚úÖ AI System initialisiert');
      },
      
      async initCryptoSystems() {
        this.log('üîê Initialisiere Crypto Systems...');
        
        // Keyring System
        window.GKIKS_KEYRING = {
          store: JSON.parse(localStorage.getItem('gkiks:keyring') || '{}'),
          
          save() {
            localStorage.setItem('gkiks:keyring', JSON.stringify(this.store));
          },
          
          async newGroup(name) {
            const raw = crypto.getRandomValues(new Uint8Array(32));
            const id = 'grp_' + crypto.randomUUID();
            this.store[id] = {
              id,
              name: name || id,
              k: btoa(String.fromCharCode(...raw)),
              created: Date.now()
            };
            this.save();
            return this.store[id];
          },
          
          list() {
            return Object.values(this.store);
          }
        };
        
        // Double Ratchet System
        window.GKIKS_RATCHET = {
          async init() {
            this.log('üîí Double-Ratchet initialisiert');
            return true;
          },
          
          async encryptMessage(message) {
            const encoder = new TextEncoder();
            const data = encoder.encode(message);
            const key = await crypto.subtle.generateKey(
              { name: 'AES-GCM', length: 256 },
              true,
              ['encrypt', 'decrypt']
            );
            
            const iv = crypto.getRandomValues(new Uint8Array(12));
            const encrypted = await crypto.subtle.encrypt(
              { name: 'AES-GCM', iv: iv },
              key,
              data
            );
            
            return {
              encrypted: btoa(String.fromCharCode(...new Uint8Array(encrypted))),
              iv: btoa(String.fromCharCode(...iv)),
              keyId: 'key_' + Date.now()
            };
          }
        };
        
        this.log('‚úÖ Crypto Systems initialisiert');
      },
      
      async initTransportGateways() {
        this.log('üöÄ Initialisiere Transport Gateways...');
        
        // TURN Token System
        window.GKIKS_TURN = {
          generateToken(username, ttl = 3600) {
            const timestamp = Math.floor(Date.now() / 1000) + ttl;
            const data = username + ':' + timestamp;
            const hash = btoa(data + ':' + 'gkiks-turn-secret');
            return {
              username: username,
              credential: hash,
              ttl: ttl,
              expires: new Date(timestamp * 1000).toISOString()
            };
          },
          
          validateToken(token) {
            try {
              const parts = atob(token.credential).split(':');
              const timestamp = parseInt(parts[1]);
              const now = Math.floor(Date.now() / 1000);
              return timestamp > now;
            } catch {
              return false;
            }
          }
        };
        
        this.log('‚úÖ Transport Gateways initialisiert');
      },
      
      startUpdateRoutine() {
        this.log('üîÑ Starte kontinuierliche Update-Routine...');
        
        // Check for updates every 30 minutes
        setInterval(async () => {
          this.log('üîç Automatische Update-Suche...');
          const updates = await GKIKS_AI.searchUpdates();
          if (updates.length > 0) {
            this.log('üì¶ Updates gefunden: ' + updates.join(', '));
          }
        }, 30 * 60 * 1000); // 30 minutes
        
        // System health check every 5 minutes
        setInterval(() => {
          this.checkSystemHealth();
        }, 5 * 60 * 1000); // 5 minutes
      },
      
      checkSystemHealth() {
        // Update status indicators
        const statuses = ['webRTCStatus', 'cryptoStatus', 'trustStatus', 'qaStatus'];
        statuses.forEach(statusId => {
          const el = document.getElementById(statusId);
          if (el) {
            el.classList.remove('ok', 'warn', 'err');
            el.classList.add('ok'); // Simulate healthy status
          }
        });
      }
    };
    
    window.GKIKS = GKIKS;
    
    // Initialize system
    GKIKS.init();
  })();

  // Event Listeners
  document.getElementById('nightBtn').onclick = () => {
    document.body.classList.toggle('night');
  };

  // Trust Layer Events
  document.getElementById('trHash').onclick = async () => {
    const txt = document.getElementById('trData').value;
    const h = await GKIKS_TRUST.sha256(txt);
    const ts = await GKIKS_TRUST.tsaStamp(h);
    GKIKS.log('STAMP ' + h + ' @ ' + ts.ts);
  };

  document.getElementById('trSign').onclick = async () => {
    const txt = document.getElementById('trData').value;
    const j = await GKIKS_TRUST.jwsSign({ data: txt, ts: new Date().toISOString() });
    GKIKS.log('JWS ' + j.substring(0, 80) + '‚Ä¶');
  };

  document.getElementById('trVC').onclick = async () => {
    const vc = GKIKS_TRUST.issueVC('did:gkiks:self', { artifact: 'runbook', policy: 'GKIKS-QA-v1' });
    const j = await GKIKS_TRUST.jwsSign(vc);
    GKIKS.log('VC/JWS ' + j.substring(0, 80) + '‚Ä¶');
  };

  // AI System Events
  document.getElementById('aiAnalyze').onclick = async () => {
    const results = await GKIKS_AI.analyze();
    GKIKS.log('AI Analyse: ' + results.join(', '));
  };

  document.getElementById('aiLearn').onclick = async () => {
    await GKIKS_AI.learn();
  };

  document.getElementById('aiFix').onclick = async () => {
    await GKIKS_AI.fix();
  };

  document.getElementById('aiUpdate').onclick = async () => {
    const updates = await GKIKS_AI.searchUpdates();
    GKIKS.log('Updates: ' + updates.join(', '));
  };

  // Keyring Events
  document.getElementById('mkGrp').onclick = async () => {
    const name = document.getElementById('grpName').value;
    const g = await GKIKS_KEYRING.newGroup(name);
    GKIKS.log('Gruppe erzeugt: ' + g.name);
  };

  document.getElementById('listGrp').onclick = () => {
    const groups = GKIKS_KEYRING.list();
    GKIKS.log('Keys: ' + groups.map(g => g.name).join(', '));
  };

  // QR Code Events
  document.getElementById('generateQRBtn').onclick = async () => {
    const groups = GKIKS_KEYRING.list();
    if (groups.length === 0) {
      GKIKS.log('Keine Gruppen vorhanden. Erstelle zuerst eine Gruppe.');
      return;
    }
    
    const group = groups[0];
    const qrData = JSON.stringify({
      type: 'group_share',
      groupId: group.id,
      name: group.name,
      timestamp: Date.now()
    });
    
    try {
      const qrCodeDataURL = await QRCode.toDataURL(qrData, {
        width: 200,
        margin: 2,
        color: { dark: '#000000', light: '#FFFFFF' }
      });
      
      const qrZone = document.getElementById('qrZone');
      qrZone.innerHTML = `
        <div class="qr-code">
          <img  src="${qrCodeDataURL}" alt="TELCO Hub Image" alt="QR Code" />
        </div>
        <div>
          <h4>Gruppe: ${group.name}</h4>
          <p>QR-Code f√ºr Gruppenfreigabe</p>
        </div>
      `;
      
      GKIKS.log('QR-Code generiert f√ºr Gruppe: ' + group.name);
    } catch (error) {
      GKIKS.log('Fehler beim Generieren des QR-Codes: ' + error.message);
    }
  };

  // TURN Token Events
  document.getElementById('generateTURNBtn').onclick = () => {
    const username = 'user_' + Math.random().toString(36).substr(2, 9);
    const token = GKIKS_TURN.generateToken(username);
    GKIKS.log('TURN Token generiert: ' + username);
    document.getElementById('tokenInfo').textContent = 'Token g√ºltig bis ' + token.expires;
  };

  document.getElementById('validateTURNBtn').onclick = () => {
    const isValid = Math.random() > 0.3;
    GKIKS.log(isValid ? 'TURN Token g√ºltig' : 'TURN Token abgelaufen');
  };

  // QA Pipeline Events
  document.getElementById('qaSeal').onclick = async () => {
    GKIKS.log('üîç Starte QA Pipeline...');
    
    // Simulate QA process
    const hints = await GKIKS_AI.analyze();
    GKIKS.log('Analyse: ' + hints.join(', '));
    
    const h = await GKIKS_TRUST.sha256(JSON.stringify(hints));
    const stamp = await GKIKS_TRUST.tsaStamp(h);
    const jws = await GKIKS_TRUST.jwsSign({ hints, timestamp: Date.now() });
    
    GKIKS.log('SEALED h=' + h + ' ts=' + stamp.ts);
  };
  </script>
</body>
</html>
