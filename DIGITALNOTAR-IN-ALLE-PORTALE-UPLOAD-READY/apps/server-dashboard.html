<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Server Dashboard - MegaphonCyberdom TELCO Hub</title>
<h1 style="position: absolute; left: -9999px;">Server Dashboard - MegaphonCyberdom TELCO Hub</h1>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #333;
            min-height: 100vh;
        }

        .dashboard-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        .dashboard-header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }

        .dashboard-title {
            font-size: 2.5rem;
            font-weight: 700;
            color: #2c3e50;
            text-align: center;
            margin-bottom: 10px;
        }

        .dashboard-subtitle {
            text-align: center;
            color: #7f8c8d;
            font-size: 1.1rem;
        }

        .status-indicator {
            display: inline-block;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 8px;
        }

        .status-online { background-color: #27ae60; }
        .status-warning { background-color: #f39c12; }
        .status-offline { background-color: #e74c3c; }
        .status-maintenance { background-color: #3498db; }

        .grid-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        .card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid #ecf0f1;
        }

        .card-title {
            font-size: 1.3rem;
            font-weight: 600;
            color: #2c3e50;
        }

        .card-icon {
            font-size: 1.5rem;
        }

        .metric-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 15px;
        }

        .metric {
            text-align: center;
            padding: 15px;
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            border-radius: 10px;
            border: 1px solid #dee2e6;
        }

        .metric-value {
            font-size: 1.8rem;
            font-weight: 700;
            color: #2c3e50;
            margin-bottom: 5px;
        }

        .metric-label {
            font-size: 0.9rem;
            color: #6c757d;
            font-weight: 500;
        }

        .metric-change {
            font-size: 0.8rem;
            margin-top: 5px;
        }

        .metric-change.positive { color: #27ae60; }
        .metric-change.negative { color: #e74c3c; }
        .metric-change.neutral { color: #7f8c8d; }

        .server-list {
            max-height: 400px;
            overflow-y: auto;
        }

        .server-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px;
            margin-bottom: 8px;
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            border-radius: 8px;
            border-left: 4px solid #3498db;
            transition: all 0.3s ease;
        }

        .server-item:hover {
            transform: translateX(5px);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }

        .server-info {
            flex: 1;
        }

        .server-name {
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 4px;
        }

        .server-details {
            font-size: 0.9rem;
            color: #6c757d;
        }

        .server-status {
            text-align: right;
        }

        .network-tools {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }

        .tool-button {
            padding: 12px 20px;
            background: linear-gradient(135deg, #3498db 0%, #2980b9 100%);
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            text-decoration: none;
            text-align: center;
            display: block;
        }

        .tool-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(52, 152, 219, 0.4);
        }

        .chart-container {
            height: 200px;
            margin-top: 15px;
            background: #f8f9fa;
            border-radius: 8px;
            padding: 15px;
            position: relative;
        }

        .chart-placeholder {
            width: 100%;
            height: 100%;
            background: linear-gradient(45deg, #e9ecef 25%, transparent 25%), 
                        linear-gradient(-45deg, #e9ecef 25%, transparent 25%), 
                        linear-gradient(45deg, transparent 75%, #e9ecef 75%), 
                        linear-gradient(-45deg, transparent 75%, #e9ecef 75%);
            background-size: 20px 20px;
            background-position: 0 0, 0 10px, 10px -10px, -10px 0px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #6c757d;
            font-weight: 600;
        }

        .alert {
            padding: 12px 15px;
            border-radius: 8px;
            margin-bottom: 10px;
            border-left: 4px solid;
        }

        .alert-info {
            background-color: #d1ecf1;
            border-color: #17a2b8;
            color: #0c5460;
        }

        .alert-warning {
            background-color: #fff3cd;
            border-color: #ffc107;
            color: #856404;
        }

        .alert-danger {
            background-color: #f8d7da;
            border-color: #dc3545;
            color: #721c24;
        }

        .alert-success {
            background-color: #d4edda;
            border-color: #28a745;
            color: #155724;
        }

        .refresh-button {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, #27ae60 0%, #2ecc71 100%);
            color: white;
            border: none;
            border-radius: 50%;
            font-size: 1.5rem;
            cursor: pointer;
            box-shadow: 0 6px 20px rgba(39, 174, 96, 0.4);
            transition: all 0.3s ease;
            z-index: 1000;
        }

        .refresh-button:hover {
            transform: scale(1.1);
            box-shadow: 0 8px 25px rgba(39, 174, 96, 0.6);
        }

        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid #f3f3f3;
            border-top: 3px solid #3498db;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .maintenance-schedule {
            background: linear-gradient(135deg, #fff3cd 0%, #ffeaa7 100%);
            border: 1px solid #ffc107;
            border-radius: 10px;
            padding: 15px;
            margin-top: 15px;
        }

        .maintenance-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 0;
            border-bottom: 1px solid #ffeaa7;
        }

        .maintenance-item:last-child {
            border-bottom: none;
        }

        .maintenance-time {
            font-weight: 600;
            color: #856404;
        }

        .maintenance-description {
            color: #856404;
            font-size: 0.9rem;
        }

        @media (max-width: 768px) {
            .grid-container {
                grid-template-columns: 1fr;
            }
            
            .dashboard-title {
                font-size: 2rem;
            }
            
            .metric-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }
    </style>
</head>
<body>
    <div class="dashboard-container">
        <!-- Dashboard Header -->
        <div class="dashboard-header">
            <h1 class="dashboard-title">üöÄ Server Dashboard</h1>
            <p class="dashboard-subtitle">
                <span class="status-indicator status-online"></span>
                Live-Monitoring aller Server und Netzwerk-Tools
            </p>
        </div>

        <!-- System Overview -->
        <div class="grid-container">
            <!-- System Status Card -->
            <div class="card">
                <div class="card-header">
                    <h2 class="card-title">üìä System Status</h2>
                    <span class="card-icon">üñ•Ô∏è</span>
                </div>
                <div class="metric-grid">
                    <div class="metric">
                        <div class="metric-value" id="cpu-usage">--</div>
                        <div class="metric-label">CPU Usage</div>
                        <div class="metric-change neutral" id="cpu-change">--</div>
                    </div>
                    <div class="metric">
                        <div class="metric-value" id="memory-usage">--</div>
                        <div class="metric-label">Memory</div>
                        <div class="metric-change neutral" id="memory-change">--</div>
                    </div>
                    <div class="metric">
                        <div class="metric-value" id="disk-usage">--</div>
                        <div class="metric-label">Disk Usage</div>
                        <div class="metric-change neutral" id="disk-change">--</div>
                    </div>
                    <div class="metric">
                        <div class="metric-value" id="network-io">--</div>
                        <div class="metric-label">Network I/O</div>
                        <div class="metric-change neutral" id="network-change">--</div>
                    </div>
                </div>
            </div>

            <!-- Server List Card -->
            <div class="card">
                <div class="card-header">
                    <h2 class="card-title">üñ•Ô∏è Server Status</h2>
                    <span class="card-icon">üì°</span>
                </div>
                <div class="server-list" id="server-list">
                    <!-- Server items will be populated by JavaScript -->
                </div>
            </div>

            <!-- Network Tools Card -->
            <div class="card">
                <div class="card-header">
                    <h2 class="card-title">üîß Netzwerk Tools</h2>
                    <span class="card-icon">üåê</span>
                </div>
                <div class="network-tools">
                    <button class="tool-button" onclick="runPing()" title="Action Button">üèì Ping Test</button>
                    <button class="tool-button" onclick="runTraceroute()" title="Action Button">üõ§Ô∏è Traceroute</button>
                    <button class="tool-button" onclick="runNmap()" title="Action Button">üîç Port Scan</button>
                    <button class="tool-button" onclick="runNetstat()" title="Action Button">üìä Netstat</button>
                    <button class="tool-button" onclick="runSS()" title="Action Button">üîó Socket Status</button>
                    <button class="tool-button" onclick="runIptables()" title="Action Button">üõ°Ô∏è Firewall</button>
                    <button class="tool-button" onclick="runTop()" title="Action Button">üìà Process Top</button>
                    <button class="tool-button" onclick="runDf()" title="Action Button">üíæ Disk Space</button>
                </div>
            </div>

            <!-- WebRTC Tools Card -->
            <div class="card">
                <div class="card-header">
                    <h2 class="card-title">üåê WebRTC Tools</h2>
                    <span class="card-icon">üì°</span>
                </div>
                <div class="network-tools">
                    <button class="tool-button" onclick="runWebRTCWebSpaceFinder()" title="Action Button">üîç WebSpace Finder</button>
                    <button class="tool-button" onclick="runWHOISWebRTCSpace()" title="Action Button">üìã WHOIS WebRTC Space</button>
                    <button class="tool-button" onclick="runWebRTCIPFinder()" title="Action Button">üåê IP Finder</button>
                    <button class="tool-button" onclick="runConnectionURLFinder()" title="Action Button">üîó Connection URL Finder</button>
                    <button class="tool-button" onclick="runWebRTCSecurityAnalysis()" title="Action Button">üîí Security Analysis</button>
                    <button class="tool-button" onclick="runWebRTCPerformanceTest()" title="Action Button">‚ö° Performance Test</button>
                    <button class="tool-button" onclick="runWebRTCServiceScan()" title="Action Button">üîç Service Scan</button>
                    <button class="tool-button" onclick="runWebRTCCapabilityTest()" title="Action Button">üß™ Capability Test</button>
                </div>
            </div>

            <!-- Performance Chart Card -->
            <div class="card">
                <div class="card-header">
                    <h2 class="card-title">üìà Performance Trends</h2>
                    <span class="card-icon">üìä</span>
                </div>
                <div class="chart-container">
                    <div class="chart-placeholder" id="performance-chart">
                        üìä Performance Chart wird geladen...
                    </div>
                </div>
            </div>

            <!-- Alerts Card -->
            <div class="card">
                <div class="card-header">
                    <h2 class="card-title">üö® System Alerts</h2>
                    <span class="card-icon">‚ö†Ô∏è</span>
                </div>
                <div id="alerts-container">
                    <!-- Alerts will be populated by JavaScript -->
                </div>
            </div>

            <!-- Maintenance Schedule Card -->
            <div class="card">
                <div class="card-header">
                    <h2 class="card-title">üîß Wartungsplan</h2>
                    <span class="card-icon">üìÖ</span>
                </div>
                <div class="maintenance-schedule">
                    <div class="maintenance-item">
                        <div>
                            <div class="maintenance-time">Heute 02:00-04:00</div>
                            <div class="maintenance-description">Regelm√§√üige Systemwartung</div>
                        </div>
                        <span class="status-indicator status-maintenance"></span>
                    </div>
                    <div class="maintenance-item">
                        <div>
                            <div class="maintenance-time">Morgen 01:00-02:00</div>
                            <div class="maintenance-description">Sicherheitsupdates</div>
                        </div>
                        <span class="status-indicator status-warning"></span>
                    </div>
                    <div class="maintenance-item">
                        <div>
                            <div class="maintenance-time">√úbermorgen 03:00-05:00</div>
                            <div class="maintenance-description">Backup-Verifikation</div>
                        </div>
                        <span class="status-indicator status-online"></span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Refresh Button -->
    <button class="refresh-button" onclick="refreshDashboard()" title="Dashboard aktualisieren" title="Action Button">
        üîÑ
    </button>

    <script>
        // Dashboard Data and Functions
        class ServerDashboard {
            constructor() {
                this.servers = [];
                this.metrics = {};
                this.alerts = [];
                this.refreshInterval = null;
                this.init();
            }

            init() {
                this.loadInitialData();
                this.startAutoRefresh();
                this.setupEventListeners();
            }

            loadInitialData() {
                this.loadServerList();
                this.loadSystemMetrics();
                this.loadAlerts();
                this.updatePerformanceChart();
            }

            loadServerList() {
                const servers = [
                    {
                        name: 'TELCO Hub Main Server',
                        ip: 'localhost:8080',
                        status: 'online',
                        cpu: 45,
                        memory: 67,
                        uptime: '15d 8h 32m',
                        lastCheck: new Date().toISOString()
                    },
                    {
                        name: 'WebRTC Signaling Server',
                        ip: 'localhost:8081',
                        status: 'online',
                        cpu: 23,
                        memory: 34,
                        uptime: '12d 4h 15m',
                        lastCheck: new Date().toISOString()
                    },
                    {
                        name: 'Matrix Bridge Server',
                        ip: 'localhost:8082',
                        status: 'online',
                        cpu: 12,
                        memory: 28,
                        uptime: '8d 12h 45m',
                        lastCheck: new Date().toISOString()
                    },
                    {
                        name: 'TURN Server',
                        ip: 'localhost:3478',
                        status: 'online',
                        cpu: 8,
                        memory: 15,
                        uptime: '20d 6h 12m',
                        lastCheck: new Date().toISOString()
                    },
                    {
                        name: 'Database Server',
                        ip: 'localhost:5432',
                        status: 'online',
                        cpu: 34,
                        memory: 56,
                        uptime: '25d 14h 8m',
                        lastCheck: new Date().toISOString()
                    },
                    {
                        name: 'Redis Cache Server',
                        ip: 'localhost:6379',
                        status: 'online',
                        cpu: 5,
                        memory: 12,
                        uptime: '18d 9h 33m',
                        lastCheck: new Date().toISOString()
                    }
                ];

                this.servers = servers;
                this.renderServerList();
            }

            renderServerList() {
                const container = document.getElementById('server-list');
                container.innerHTML = '';

                this.servers.forEach(server => {
                    const serverItem = document.createElement('div');
                    serverItem.className = 'server-item';
                    
                    const statusClass = `status-${server.status}`;
                    const statusText = server.status === 'online' ? 'Online' : 
                                     server.status === 'warning' ? 'Warning' : 
                                     server.status === 'maintenance' ? 'Maintenance' : 'Offline';

                    serverItem.innerHTML = `
                        <div class="server-info">
                            <div class="server-name">${server.name}</div>
                            <div class="server-details">
                                ${server.ip} ‚Ä¢ CPU: ${server.cpu}% ‚Ä¢ RAM: ${server.memory}% ‚Ä¢ Uptime: ${server.uptime}
                            </div>
                        </div>
                        <div class="server-status">
                            <span class="status-indicator ${statusClass}"></span>
                            ${statusText}
                        </div>
                    `;

                    container.appendChild(serverItem);
                });
            }

            loadSystemMetrics() {
                // Simulate real-time metrics
                const metrics = {
                    cpu: Math.floor(Math.random() * 100),
                    memory: Math.floor(Math.random() * 100),
                    disk: Math.floor(Math.random() * 100),
                    network: Math.floor(Math.random() * 1000)
                };

                this.updateMetrics(metrics);
            }

            updateMetrics(metrics) {
                document.getElementById('cpu-usage').textContent = `${metrics.cpu}%`;
                document.getElementById('memory-usage').textContent = `${metrics.memory}%`;
                document.getElementById('disk-usage').textContent = `${metrics.disk}%`;
                document.getElementById('network-io').textContent = `${metrics.network} MB/s`;

                // Update change indicators
                this.updateChangeIndicator('cpu-change', metrics.cpu);
                this.updateChangeIndicator('memory-change', metrics.memory);
                this.updateChangeIndicator('disk-change', metrics.disk);
                this.updateChangeIndicator('network-change', metrics.network);
            }

            updateChangeIndicator(elementId, value) {
                const element = document.getElementById(elementId);
                const change = Math.floor(Math.random() * 20) - 10; // Random change
                
                element.textContent = change > 0 ? `+${change}%` : `${change}%`;
                element.className = `metric-change ${change > 0 ? 'positive' : change < 0 ? 'negative' : 'neutral'}`;
            }

            loadAlerts() {
                const alerts = [
                    {
                        type: 'info',
                        message: 'Regelm√§√üige Systemwartung geplant f√ºr heute 02:00-04:00',
                        timestamp: new Date().toISOString()
                    },
                    {
                        type: 'warning',
                        message: 'Hohe CPU-Auslastung auf TELCO Hub Main Server (85%)',
                        timestamp: new Date(Date.now() - 300000).toISOString()
                    },
                    {
                        type: 'success',
                        message: 'Alle Sicherheitsupdates erfolgreich installiert',
                        timestamp: new Date(Date.now() - 600000).toISOString()
                    }
                ];

                this.alerts = alerts;
                this.renderAlerts();
            }

            renderAlerts() {
                const container = document.getElementById('alerts-container');
                container.innerHTML = '';

                this.alerts.forEach(alert => {
                    const alertElement = document.createElement('div');
                    alertElement.className = `alert alert-${alert.type}`;
                    alertElement.innerHTML = `
                        <div>${alert.message}</div>
                        <small>${new Date(alert.timestamp).toLocaleString()}</small>
                    `;
                    container.appendChild(alertElement);
                });
            }

            updatePerformanceChart() {
                const chartElement = document.getElementById('performance-chart');
                chartElement.innerHTML = `
                    <div style="text-align: center;">
                        <div style="font-size: 2rem; margin-bottom: 10px;">üìä</div>
                        <div>Performance Chart</div>
                        <div style="font-size: 0.8rem; margin-top: 5px;">
                            CPU: ${Math.floor(Math.random() * 100)}% | 
                            RAM: ${Math.floor(Math.random() * 100)}% | 
                            Disk: ${Math.floor(Math.random() * 100)}%
                        </div>
                    </div>
                `;
            }

            startAutoRefresh() {
                this.refreshInterval = setInterval(() => {
                    this.loadSystemMetrics();
                    this.updatePerformanceChart();
                    this.loadServerList();
                }, 5000); // Refresh every 5 seconds
            }

            setupEventListeners() {
                // Add any additional event listeners here
            }

            refresh() {
                this.loadInitialData();
            }
        }

        // Network Tools Functions
        function runPing() {
            showToolResult('üèì Ping Test', 'Ping-Test wird ausgef√ºhrt...');
            setTimeout(() => {
                showToolResult('üèì Ping Test', `
                    PING google.com (142.250.191.14): 56 data bytes
                    64 bytes from 142.250.191.14: icmp_seq=0 ttl=57 time=12.345 ms
                    64 bytes from 142.250.191.14: icmp_seq=1 ttl=57 time=11.234 ms
                    64 bytes from 142.250.191.14: icmp_seq=2 ttl=57 time=13.456 ms
                    
                    --- google.com ping statistics ---
                    3 packets transmitted, 3 received, 0% packet loss
                    round-trip min/avg/max = 11.234/12.345/13.456 ms
                `);
            }, 2000);
        }

        function runTraceroute() {
            showToolResult('üõ§Ô∏è Traceroute', 'Traceroute wird ausgef√ºhrt...');
            setTimeout(() => {
                showToolResult('üõ§Ô∏è Traceroute', `
                    traceroute to google.com (142.250.191.14), 30 hops max
                     1  gateway (192.168.1.1)  1.234 ms  1.123 ms  1.345 ms
                     2  10.0.0.1 (10.0.0.1)  5.678 ms  5.567 ms  5.789 ms
                     3  * * *
                     4  google.com (142.250.191.14)  12.345 ms  11.234 ms  13.456 ms
                `);
            }, 3000);
        }

        function runNmap() {
            showToolResult('üîç Port Scan', 'Port-Scan wird ausgef√ºhrt...');
            setTimeout(() => {
                showToolResult('üîç Port Scan', `
                    Starting Nmap 7.94 ( https://nmap.org )
                    Nmap scan report for localhost (127.0.0.1)
                    Host is up (0.0001s latency).
                    
                    PORT     STATE SERVICE
                    22/tcp   open  ssh
                    80/tcp   open  http
                    443/tcp  open  https
                    8080/tcp open  http-proxy
                    8081/tcp open  blackice-icecap
                `);
            }, 4000);
        }

        function runNetstat() {
            showToolResult('üìä Netstat', 'Netstat wird ausgef√ºhrt...');
            setTimeout(() => {
                showToolResult('üìä Netstat', `
                    Active Internet connections (w/o servers)
                    Proto Recv-Q Send-Q Local Address           Foreign Address         State
                    tcp        0      0 localhost:8080          localhost:45678         ESTABLISHED
                    tcp        0      0 localhost:8081          localhost:45679         ESTABLISHED
                    tcp        0      0 localhost:ssh           localhost:45680         ESTABLISHED
                `);
            }, 1500);
        }

        function runSS() {
            showToolResult('üîó Socket Status', 'Socket-Status wird abgerufen...');
            setTimeout(() => {
                showToolResult('üîó Socket Status', `
                    Netid  State  Recv-Q Send-Q Local Address:Port  Peer Address:Port
                    tcp    ESTAB  0      0      127.0.0.1:8080      127.0.0.1:45678
                    tcp    ESTAB  0      0      127.0.0.1:8081      127.0.0.1:45679
                    tcp    LISTEN 0      128    0.0.0.0:22          0.0.0.0:*
                `);
            }, 1000);
        }

        function runIptables() {
            showToolResult('üõ°Ô∏è Firewall', 'Firewall-Status wird abgerufen...');
            setTimeout(() => {
                showToolResult('üõ°Ô∏è Firewall', `
                    Chain INPUT (policy ACCEPT)
                    target     prot opt source               destination
                    ACCEPT     all  --  anywhere             anywhere
                    DROP       tcp  --  anywhere             anywhere            tcp dpt:telnet
                    
                    Chain FORWARD (policy ACCEPT)
                    target     prot opt source               destination
                    
                    Chain OUTPUT (policy ACCEPT)
                    target     prot opt source               destination
                `);
            }, 2000);
        }

        function runTop() {
            showToolResult('üìà Process Top', 'Top-Prozesse werden abgerufen...');
            setTimeout(() => {
                showToolResult('üìà Process Top', `
                    PID USER      PR  NI    VIRT    RES    SHR S  %CPU  %MEM     TIME+ COMMAND
                    1234 root      20   0  1234567  123456  12345 S   5.0   2.1   0:12.34 node
                    5678 www-data  20   0   987654   98765   9876 S   3.0   1.5   0:08.76 nginx
                    9012 postgres  20   0  2345678  234567  23456 S   2.0   3.2   0:15.43 postgres
                `);
            }, 1500);
        }

        function runDf() {
            showToolResult('üíæ Disk Space', 'Festplatten-Speicher wird abgerufen...');
            setTimeout(() => {
                showToolResult('üíæ Disk Space', `
                    Filesystem      Size  Used Avail Use% Mounted on
                    /dev/sda1        20G  8.5G   11G  45% /
                    /dev/sda2       100G   45G   50G  48% /var
                    /dev/sda3       200G   89G  101G  47% /home
                `);
            }, 1000);
        }

        function showToolResult(title, result) {
            // Create modal or overlay to show results
            const modal = document.createElement('div');
            modal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0, 0, 0, 0.8);
                display: flex;
                justify-content: center;
                align-items: center;
                z-index: 10000;
            `;

            const content = document.createElement('div');
            content.style.cssText = `
                background: white;
                padding: 30px;
                border-radius: 15px;
                max-width: 80%;
                max-height: 80%;
                overflow: auto;
                box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            `;

            content.innerHTML = `
                <h3 style="margin-bottom: 20px; color: #2c3e50;">${title}</h3>
                <pre style="background: #f8f9fa; padding: 15px; border-radius: 8px; font-family: 'Courier New', monospace; white-space: pre-wrap; word-wrap: break-word;">${result}</pre>
                <button onclick="this.parentElement.parentElement.remove()" style="
                    margin-top: 20px;
                    padding: 10px 20px;
                    background: #3498db;
                    color: white;
                    border: none;
                    border-radius: 8px;
                    cursor: pointer;
                    font-weight: 600;
                " title="Action Button">Schlie√üen</button>
            `;

            modal.appendChild(content);
            document.body.appendChild(modal);

            // Auto-close after 10 seconds
            setTimeout(() => {
                if (modal.parentElement) {
                    modal.remove();
                }
            }, 10000);
        }

        function refreshDashboard() {
            if (window.dashboard) {
                window.dashboard.refresh();
            }
        }

        // WebRTC Tools Functions
        function runWebRTCWebSpaceFinder() {
            const domain = prompt('Domain eingeben (z.B. localhost):', 'localhost');
            if (!domain) return;
            
            showToolResult('üîç WebRTC WebSpace Finder', 'WebSpace-Suche wird ausgef√ºhrt...');
            
            fetch(`/api/webrtc/webspace-finder/${domain}`)
                .then(response => response.json())
                .then(data => {
                    let result = `WebRTC WebSpace Finder Ergebnisse f√ºr: ${domain}\n\n`;
                    
                    if (data.success) {
                        result += `‚úÖ Gefundene WebSpaces: ${data.count}\n\n`;
                        
                        data.webSpaces.forEach((space, index) => {
                            result += `${index + 1}. ${space.domain}:${space.port}\n`;
                            result += `   Status: ${space.status}\n`;
                            result += `   WebRTC Info: ${JSON.stringify(space.webrtcInfo, null, 2)}\n\n`;
                        });
                        
                        if (data.endpoints && data.endpoints.length > 0) {
                            result += `Endpunkte:\n`;
                            data.endpoints.forEach((endpoint, index) => {
                                result += `${index + 1}. ${endpoint.path} (${endpoint.type})\n`;
                            });
                        }
                    } else {
                        result += `‚ùå Fehler: ${data.error}`;
                    }
                    
                    showToolResult('üîç WebRTC WebSpace Finder', result);
                })
                .catch(error => {
                    showToolResult('üîç WebRTC WebSpace Finder', `Fehler: ${error.message}`);
                });
        }

        function runWHOISWebRTCSpace() {
            const domain = prompt('Domain f√ºr WHOIS-Analyse eingeben:', 'example.com');
            if (!domain) return;
            
            showToolResult('üìã WHOIS WebRTC Space', 'WHOIS-Analyse wird ausgef√ºhrt...');
            
            fetch(`/api/webrtc/whois/${domain}`)
                .then(response => response.json())
                .then(data => {
                    let result = `WHOIS WebRTC Space Analyse f√ºr: ${domain}\n\n`;
                    
                    if (data.success) {
                        result += `üìã WHOIS Informationen:\n`;
                        result += `Registrar: ${data.whois.registrar}\n`;
                        result += `Erstellungsdatum: ${data.whois.creationDate}\n`;
                        result += `Ablaufdatum: ${data.whois.expirationDate}\n`;
                        result += `Status: ${data.whois.status}\n\n`;
                        
                        result += `üåê DNS Informationen:\n`;
                        result += `IPv4: ${data.dns.ipv4.join(', ')}\n`;
                        result += `IPv6: ${data.dns.ipv6.join(', ')}\n\n`;
                        
                        result += `üîí SSL Informationen:\n`;
                        result += `G√ºltig: ${data.ssl.valid ? 'Ja' : 'Nein'}\n\n`;
                        
                        result += `üì° WebRTC Konfiguration:\n`;
                        result += `STUN Server: ${data.webrtc.stunServers.join(', ')}\n`;
                        result += `TURN Server: ${data.webrtc.turnServers.join(', ')}\n`;
                        result += `Signaling Server: ${data.webrtc.signalingServer}\n`;
                    } else {
                        result += `‚ùå Fehler: ${data.error}`;
                    }
                    
                    showToolResult('üìã WHOIS WebRTC Space', result);
                })
                .catch(error => {
                    showToolResult('üìã WHOIS WebRTC Space', `Fehler: ${error.message}`);
                });
        }

        function runWebRTCIPFinder() {
            const domain = prompt('Domain f√ºr IP-Suche eingeben:', 'localhost');
            if (!domain) return;
            
            showToolResult('üåê WebRTC IP Finder', 'IP-Suche wird ausgef√ºhrt...');
            
            fetch(`/api/webrtc/ip-finder/${domain}`)
                .then(response => response.json())
                .then(data => {
                    let result = `WebRTC IP Finder Ergebnisse f√ºr: ${domain}\n\n`;
                    
                    if (data.success) {
                        result += `‚úÖ Gefundene IPs: ${data.count}\n\n`;
                        
                        data.ips.forEach((ip, index) => {
                            result += `${index + 1}. ${ip.ip} (${ip.type}) - Quelle: ${ip.source}\n`;
                        });
                        
                        if (data.webrtcIPs && data.webrtcIPs.length > 0) {
                            result += `\nWebRTC-spezifische IPs:\n`;
                            data.webrtcIPs.forEach((ip, index) => {
                                result += `${index + 1}. ${ip.ip} - ${ip.type}\n`;
                            });
                        }
                    } else {
                        result += `‚ùå Fehler: ${data.error}`;
                    }
                    
                    showToolResult('üåê WebRTC IP Finder', result);
                })
                .catch(error => {
                    showToolResult('üåê WebRTC IP Finder', `Fehler: ${error.message}`);
                });
        }

        function runConnectionURLFinder() {
            const domain = prompt('Domain f√ºr Connection URL-Suche eingeben:', 'localhost');
            if (!domain) return;
            
            showToolResult('üîó Connection URL Finder', 'Connection URL-Suche wird ausgef√ºhrt...');
            
            fetch(`/api/webrtc/connection-urls/${domain}`)
                .then(response => response.json())
                .then(data => {
                    let result = `Connection URL Finder Ergebnisse f√ºr: ${domain}\n\n`;
                    
                    if (data.success) {
                        result += `‚úÖ Gefundene URLs: ${data.count}\n\n`;
                        
                        data.urls.forEach((url, index) => {
                            result += `${index + 1}. ${url.url}\n`;
                            result += `   Status: ${url.status}\n`;
                            result += `   Typ: ${url.info.type}\n`;
                            result += `   F√§higkeiten: ${url.info.capabilities.join(', ')}\n\n`;
                        });
                        
                        if (data.dynamicURLs && data.dynamicURLs.length > 0) {
                            result += `Dynamische URLs:\n`;
                            data.dynamicURLs.forEach((url, index) => {
                                result += `${index + 1}. ${url.url}\n`;
                            });
                        }
                    } else {
                        result += `‚ùå Fehler: ${data.error}`;
                    }
                    
                    showToolResult('üîó Connection URL Finder', result);
                })
                .catch(error => {
                    showToolResult('üîó Connection URL Finder', `Fehler: ${error.message}`);
                });
        }

        function runWebRTCSecurityAnalysis() {
            const domain = prompt('Domain f√ºr Security-Analyse eingeben:', 'localhost');
            if (!domain) return;
            
            showToolResult('üîí WebRTC Security Analysis', 'Security-Analyse wird ausgef√ºhrt...');
            
            fetch(`/api/webrtc/security-analysis/${domain}`)
                .then(response => response.json())
                .then(data => {
                    let result = `WebRTC Security Analysis f√ºr: ${domain}\n\n`;
                    
                    if (data.success) {
                        result += `üîí DTLS Sicherheit:\n`;
                        result += `Level: ${data.security.dtls.level}\n`;
                        result += `Schwachstellen: ${data.security.dtls.vulnerabilities.length}\n\n`;
                        
                        result += `üîí SRTP Sicherheit:\n`;
                        result += `Level: ${data.security.srtp.level}\n`;
                        result += `Schwachstellen: ${data.security.srtp.vulnerabilities.length}\n\n`;
                        
                        result += `üîí ICE Sicherheit:\n`;
                        result += `Level: ${data.security.ice.level}\n`;
                        result += `Schwachstellen: ${data.security.ice.vulnerabilities.length}\n\n`;
                        
                        result += `üîí Signaling Sicherheit:\n`;
                        result += `Level: ${data.security.signaling.level}\n`;
                        result += `Schwachstellen: ${data.security.signaling.vulnerabilities.length}\n\n`;
                        
                        if (data.security.recommendations.length > 0) {
                            result += `üí° Empfehlungen:\n`;
                            data.security.recommendations.forEach((rec, index) => {
                                result += `${index + 1}. ${rec}\n`;
                            });
                        }
                    } else {
                        result += `‚ùå Fehler: ${data.error}`;
                    }
                    
                    showToolResult('üîí WebRTC Security Analysis', result);
                })
                .catch(error => {
                    showToolResult('üîí WebRTC Security Analysis', `Fehler: ${error.message}`);
                });
        }

        function runWebRTCPerformanceTest() {
            const domain = prompt('Domain f√ºr Performance-Test eingeben:', 'localhost');
            if (!domain) return;
            
            showToolResult('‚ö° WebRTC Performance Test', 'Performance-Test wird ausgef√ºhrt...');
            
            fetch(`/api/webrtc/performance-test/${domain}`)
                .then(response => response.json())
                .then(data => {
                    let result = `WebRTC Performance Test f√ºr: ${domain}\n\n`;
                    
                    if (data.success) {
                        result += `‚ö° Latenz: ${data.performance.latency.value} ${data.performance.latency.unit}\n`;
                        result += `üìä Bandbreite: ${data.performance.bandwidth.value} ${data.performance.bandwidth.unit}\n`;
                        result += `üìà Jitter: ${data.performance.jitter.value} ${data.performance.jitter.unit}\n`;
                        result += `üìâ Paketverlust: ${data.performance.packetLoss.value} ${data.performance.packetLoss.unit}\n`;
                        result += `‚è±Ô∏è Verbindungszeit: ${data.performance.connectionTime.value} ${data.performance.connectionTime.unit}\n`;
                        result += `‚≠ê Qualit√§t: ${data.performance.quality.score}/100 (${data.performance.quality.rating})\n`;
                    } else {
                        result += `‚ùå Fehler: ${data.error}`;
                    }
                    
                    showToolResult('‚ö° WebRTC Performance Test', result);
                })
                .catch(error => {
                    showToolResult('‚ö° WebRTC Performance Test', `Fehler: ${error.message}`);
                });
        }

        function runWebRTCServiceScan() {
            const domain = prompt('Domain f√ºr Service-Scan eingeben:', 'localhost');
            if (!domain) return;
            
            showToolResult('üîç WebRTC Service Scan', 'Service-Scan wird ausgef√ºhrt...');
            
            fetch(`/api/webrtc/service-scan/${domain}`)
                .then(response => response.json())
                .then(data => {
                    let result = `WebRTC Service Scan f√ºr: ${domain}\n\n`;
                    
                    if (data.success) {
                        result += `‚úÖ Gefundene Services: ${data.services.length}\n\n`;
                        
                        data.services.forEach((service, index) => {
                            result += `${index + 1}. ${service.name}\n`;
                            result += `   Port: ${service.port}\n`;
                            result += `   Typ: ${service.type}\n`;
                            result += `   Status: ${service.status}\n`;
                            result += `   F√§higkeiten: ${service.capabilities.join(', ')}\n\n`;
                        });
                    } else {
                        result += `‚ùå Fehler: ${data.error}`;
                    }
                    
                    showToolResult('üîç WebRTC Service Scan', result);
                })
                .catch(error => {
                    showToolResult('üîç WebRTC Service Scan', `Fehler: ${error.message}`);
                });
        }

        function runWebRTCCapabilityTest() {
            const domain = prompt('Domain f√ºr Capability-Test eingeben:', 'localhost');
            if (!domain) return;
            
            showToolResult('üß™ WebRTC Capability Test', 'Capability-Test wird ausgef√ºhrt...');
            
            fetch(`/api/webrtc/capability-test/${domain}`)
                .then(response => response.json())
                .then(data => {
                    let result = `WebRTC Capability Test f√ºr: ${domain}\n\n`;
                    
                    if (data.success) {
                        result += `üß™ Browser-Unterst√ºtzung:\n`;
                        result += `WebRTC: ${data.capabilities.webrtc ? '‚úÖ' : '‚ùå'}\n`;
                        result += `PeerConnection: ${data.capabilities.peerConnection ? '‚úÖ' : '‚ùå'}\n`;
                        result += `MediaStream: ${data.capabilities.mediaStream ? '‚úÖ' : '‚ùå'}\n`;
                        result += `DataChannel: ${data.capabilities.dataChannel ? '‚úÖ' : '‚ùå'}\n`;
                        result += `ScreenShare: ${data.capabilities.screenShare ? '‚úÖ' : '‚ùå'}\n\n`;
                        
                        result += `üîß Codec-Unterst√ºtzung:\n`;
                        result += `Audio Codecs: ${data.codecs.audio.join(', ')}\n`;
                        result += `Video Codecs: ${data.codecs.video.join(', ')}\n\n`;
                        
                        result += `üåê Netzwerk-Unterst√ºtzung:\n`;
                        result += `STUN: ${data.network.stun ? '‚úÖ' : '‚ùå'}\n`;
                        result += `TURN: ${data.network.turn ? '‚úÖ' : '‚ùå'}\n`;
                        result += `ICE: ${data.network.ice ? '‚úÖ' : '‚ùå'}\n`;
                    } else {
                        result += `‚ùå Fehler: ${data.error}`;
                    }
                    
                    showToolResult('üß™ WebRTC Capability Test', result);
                })
                .catch(error => {
                    showToolResult('üß™ WebRTC Capability Test', `Fehler: ${error.message}`);
                });
        }

        // Initialize Dashboard
        window.dashboard = new ServerDashboard();
    </script>
</body>
</html>
